#!/bin/bash

SPEAK_PROFILE="handsfree_head_unit"
MEDIA_PROFILE="a2dp_sink"
PACTL_INFO=$(pactl info | grep "Sink:")
HEADSET_ID="bluez_card.4C_87_5D_78_60_DC" # Bose QC35 II
DUNST_ID="--hint=string:x-dunst-stack-tag:headset_profile_change"

if grep -q "$SPEAK_PROFILE" <<< "$PACTL_INFO"; then
  notify-send $DUNST_ID "Headset now: Media"
  pactl set-card-profile $HEADSET_ID $MEDIA_PROFILE
else
  notify-send $DUNST_ID "Headset now: Calls"
  pactl set-card-profile $HEADSET_ID $SPEAK_PROFILE
fi
